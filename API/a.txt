ANSWERS TO FRONTEND INTEGRATION QUESTIONS - WhatShouldIDo Project
==================================================================

QUESTION 1: Card fields and UI badges
=====================================
ANSWER: YES, the schema is correct based on SuggestionDto (line 9-27 in SuggestionDto.cs):
- id, placeName, latitude, longitude, category, source, reason, score, createdAt, userHash, isSponsored, sponsoredUntil

UI Recommendations:
✓ Show "Sponsored" badge for isSponsored=true items
✓ Show small chips for reason (e.g., "Yakın konumdan önerildi", "Konumdan rastgele seçildi") 
✓ Show source chips (e.g., "Google")
✓ Display score as star rating when available

QUESTION 2-4: Prompt search endpoint
===================================
ANSWER: YES, completely correct. The endpoint is implemented in DiscoverController.cs line 38-43:

POST /api/discover/prompt
Request Body:
{
  "prompt": "I want a drink coffee",
  "latitude": <num>,
  "longitude": <num>, 
  "radius": <num>
}

Response: Array of SuggestionDto objects
- Handles natural language processing via BasicPromptInterpreter
- Extracts location mentions from prompt text
- Uses Google Places API for search
- Results cached for 15 minutes
- Sponsored items automatically sorted first

QUESTION 5: Nearby endpoint
==========================
ANSWER: YES, exactly as implemented in DiscoverController.cs line 20-25:

GET /api/discover?lat={lat}&lng={lng}&radius={radius}

Default Usage:
✓ Perfect for "What's near me?" on first load
✓ Default radius is 3000 meters (line 21)
✓ Returns nearby restaurants by default
✓ Results cached for 30 minutes

QUESTION 6: Random endpoint
===========================
ANSWER: YES, implemented in DiscoverController.cs line 28-35:

GET /api/discover/random?lat={lat}&lng={lng}&radius={radius}

Features:
✓ Include "Surprise me" button - perfect use case
✓ Returns single random SuggestionDto or 404 if no places found
✓ Uses Turkish message "Uygun mekan bulunamadı" for not found
✓ Reason field shows "Konumdan rastgele seçildi"

QUESTION 7: Authentication
==========================
ANSWER: Based on AuthController.cs:

Login Endpoint: POST /api/auth/login
Request: { "username": "admin", "password": "password" }
Response: { "token": "jwt_token_string" }

Current Implementation:
- Only LOGIN endpoint exists (no signup yet)
- Hardcoded credentials: admin/password (line 23)
- JWT token format: Authorization: Bearer {token}
- Token expiry: Configurable via JwtSettings:DurationInMinutes in appsettings.json
- Uses HMAC-SHA256 signing

Signup: NOT IMPLEMENTED YET - only login exists

QUESTION 8: History endpoint
===========================
ANSWER: NOT IMPLEMENTED YET in backend

Current State:
- No user history tracking in database
- No /history endpoint exists
- Suggestion entity has UserHash field but unused

Recommendation:
✓ Store recent prompts client-side for demo
✓ Gate /history page until real endpoint exists  
✓ Future implementation would need user context and history table

QUESTION 9: Sponsored ordering
==============================
ANSWER: Backend already handles sorting in SuggestionService.cs line 97-105:

Sorting Logic:
1. Sponsored items first (.OrderByDescending(x => x.IsSponsored))
2. Then by score/rating (.ThenByDescending(x => x.Score))
3. Then by distance (.ThenBy(distance calculation))

Frontend Recommendation:
✓ Just show sponsored badge - don't manually reorder
✓ Backend pre-sorts everything correctly
✓ Visual "Sponsored" badge sufficient for user awareness

QUESTION 10: Geolocation on first visit
======================================
ANSWER: YES, this approach is recommended

Implementation Strategy:
✓ Prompt for geolocation immediately
✓ If denied, show Google Places Autocomplete input
✓ Google Places Autocomplete is perfect fallback (already integrated via GoogleGeocodingService)

Current Support:
- GoogleGeocodingService.cs handles address-to-coordinates conversion
- BasicPromptInterpreter extracts location names from text
- System supports both coordinate-based and text-based location input

QUESTION 11: Default radius
===========================
ANSWER: Based on current implementation:

Default Radius: 3000 meters (3km)
- Used in DiscoverController line 21 and 29
- Also used in GooglePlacesProvider line 116

User Adjustable:
✓ YES, make it user-adjustable
✓ All endpoints accept radius parameter
✓ Suggest options: 1km, 3km, 5km, 10km
✓ Cache keys include radius so different ranges cached separately

QUESTION 12: Browser GPS precision
=================================
ANSWER: YES, use browser GPS for both signed-in and guest users

Reasoning:
- Current system doesn't differentiate user types for location
- All endpoints work with lat/lng coordinates regardless of auth status
- GPS provides best accuracy for location-based recommendations
- Fallback to manual location input if GPS denied

Implementation Notes:
- No user-specific location storage currently
- System is stateless for location data
- Each request needs fresh coordinates

ADDITIONAL TECHNICAL NOTES:
==========================

Caching Strategy:
- Nearby searches: 30-minute TTL
- Prompt searches: 15-minute TTL  
- Cache keys prevent collisions between different search types

Error Handling:
- 404 for not found places
- Validation errors return 400 Bad Request
- Global exception middleware handles unexpected errors

Rate Limiting:
- Consider implementing for Google API protection
- Current system has no rate limiting

Security:
- JWT tokens required for admin functions only
- Discovery endpoints are public
- API keys stored in configuration